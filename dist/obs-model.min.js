/*! obs-model 0.3.0 Copyright (c) 2013 Alan Plum. MIT licensed. */function model(e,t){function n(e){e=e||{},this._destructors=[];var t={},n,r,i;for(n in this.model.attrs)r=this.model.attrs[n]||{},r.write||r.read?(this[n]=obs.computed({lazy:r.lazy,write:r.write,read:r.read,context:this}),r.watch&&(t[n]=[].concat(r.watch))):e.hasOwnProperty(n)?this[n]=obs.prop(e[n]):this[n]=obs.prop();for(n in t)for(i=0;i<t[n].length;i++)this[n].watch(this[t[n][i]]);this._destructors.push(function(){for(var e in t)for(var n=0;n<t[e].length;n++)this[e].unwatch(this[t[e][n]])});for(i=0;i<this.model.plugins.length;i++)this.model.plugins[i](this)}return n.prototype={model:n,dismiss:function(){for(var e=0;e<this._destructors.length;e++)this._destructors[e].call(this)}},aug(n,{modelName:e,attrs:t||{},plugins:[],attr:function(e,t){return this.attrs[e]=t,this},use:function(e){for(var t=0;t<this.plugins.length;t++)if(this.plugins[t]===e)return this;return typeof e.contributeToModel=="function"&&e.contributeToModel(this),this.plugins.push(e),this}}),n}var aug=require("aug"),obs=require("obs");exports.model=model;