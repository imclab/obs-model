/*! obs-model 0.3.0 Copyright (c) 2013 Alan Plum. MIT licensed. */define(function(e,t){function i(e,t){function i(e){e=e||{},this._destructors=[];var t={},n={},i,s,o;for(i in this.model.attrs)s=this.model.attrs[i]||{},s.write||s.read?(this[i]=r.computed({lazy:s.lazy,write:s.write,read:s.read?function(){}:s.read,context:this}),s.read&&(t[i]=s.read),s.watch&&(n[i]=[].concat(s.watch))):e.hasOwnProperty(i)?this[i]=r.prop(e[i]):this[i]=r.prop();for(i in t)this[i].read=t[i];for(i in n)for(o=0;o<n[i].length;o++)this[i].watch(this[n[i][o]]);this._destructors.push(function(){for(var e in n)for(var t=0;t<n[e].length;t++)this[e].unwatch(this[n[e][t]])});for(o=0;o<this.model.plugins.length;o++)this.model.plugins[o](this)}return i.prototype={model:i,dismiss:function(){for(var e=0;e<this._destructors.length;e++)this._destructors[e].call(this)}},n(i,{modelName:e,attrs:t||{},plugins:[],attr:function(e,t){return this.attrs[e]=t,this},use:function(e){for(var t=0;t<this.plugins.length;t++)if(this.plugins[t]===e)return this;return typeof e.contributeToModel=="function"&&e.contributeToModel(this),this.plugins.push(e),this}}),i}var n=e("aug"),r=e("obs");t.model=i});